<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>Cómic Pensamiento Crítico</title>
    <script src="//cdn.jsdelivr.net/phaser/2.2.2/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">
    
var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update, render: render});

var ill;
var left;
var right;
var voice;
var voice_button;
var A_button;
var B_button;
var C_button;
var rA;
var rB;
var rC;
var posAx=150;
var posAy=280;
var posBx=150;
var posBy=360;
var posCx=150;
var posCy=440;
var ans=false;

function preload() {
    game.load.audio('voice', 'assetsAudio/s12.m4a');
    game.load.image('ill', 'assetsImg/s12.jpg');
    game.load.image('red', 'assetsImg/red2.png');
    game.load.spritesheet('left', 'assetsImg/arrowLeft.png', 98, 95);
    game.load.spritesheet('right', 'assetsImg/arrowRight.png', 98, 95);
    game.load.spritesheet('buttonAudio', 'assetsImg/buttonAudio.png', 114, 50);
    game.load.spritesheet('Abutton', 'assetsImg/b12a.png', 116, 70);
    game.load.spritesheet('Bbutton', 'assetsImg/b12b.png', 115, 70);
    game.load.spritesheet('Cbutton', 'assetsImg/b12c.png', 116, 70);
}
function create() {    
    game.stage.backgroundColor = "#FFFFFF";
    ill=game.add.sprite(game.world.centerX, game.world.centerY, 'ill');
    ill.anchor.setTo(0.5);
    voice=game.add.audio('voice');
    voice.play();
    left=game.add.button(20,450, 'left', goLeft, this, 1,0,2);
    voice_button = game.add.button(685, 100, 'buttonAudio', play_sound ,this, 1, 0, 2);
    A_button=game.add.button(posAx, posAy, 'Abutton', goA ,this, 1, 0, 2);
    A_button.anchor.setTo(0.5);
    B_button=game.add.button(posBx, posBy, 'Bbutton', goB ,this, 1, 0, 2);
    B_button.anchor.setTo(0.5);
    C_button=game.add.button(posCx, posCy, 'Cbutton', goC ,this, 1, 0, 2);
    C_button.anchor.setTo(0.5);

    var style = { font: "14px Arial", align: "center" };
    var style2 = { font: "12px Arial", align: "center" };
    mesb1= game.add.text(290, 335, localStorage.getItem('b_m1'), style2);
    mesb1= game.add.text(290, 390, localStorage.getItem('b_m2'), style2);
    mesb3= game.add.text(290, 455, localStorage.getItem('b_m3'), style2);
    mesr1= game.add.text(460, 335, localStorage.getItem('r_m1'), style);
    mesr2= game.add.text(460, 390, localStorage.getItem('r_m2'), style);
    mesr3= game.add.text(460, 455, localStorage.getItem('r_m3'), style);
    mest1= game.add.text(615, 335, localStorage.getItem('t_m1'), style);
    mest2= game.add.text(615, 390, localStorage.getItem('t_m2'), style);
    mest3= game.add.text(615, 455, localStorage.getItem('t_m3'), style);

}
function play_sound(){
    voice.play();
}
function goRight(){
    window.open("s14.html", "_self");
}
function goLeft(){
    window.open("s11.html", "_self");
}
function goA(){
    if(rB!=null){
        rB.destroy();
    }
    if(rC!=null){
        rC.destroy();
    }
    rA=game.add.sprite(posAx, posAy, 'red');
    rA.anchor.setTo(0.5);
    ans=true;
    checkRight();
}
function goB(){
    if(rA!=null){
        rA.destroy();
    }
    if(rC!=null){
        rC.destroy();
    }
    rB=game.add.sprite(posBx, posBy, 'red');
    rB.anchor.setTo(0.5);
    ans=true;
    checkRight();
}
function goC(){
    if(rA!=null){
        rA.destroy();
    }
    if(rB!=null){
        rB.destroy();
    }
    rC=game.add.sprite(posCx, posCy, 'red');
    rC.anchor.setTo(0.5);
    ans=true;
    checkRight();
}
function checkRight(){
    if(ans){
        right=game.add.button(685,450, 'right', goRight, this, 1,0,2);
    }
}
function update(){
}
function render() {
    //game.debug.inputInfo(32, 32);
}
</script>

</body>
</html>